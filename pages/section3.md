<SectionTitle title="スキーマ駆動開発のトレードオフ構造" />

---

## トレードオフとなるもの

1. `ベネフィット<->メンテナンスコスト`
2. `責任：FEエンジニア<->BEエンジニア`
3. `契約優先<->実装優先`

---

## イメージ図

---

## そもそもインターフェースは誰が責任を持つものなのか？

- APIを実装するのはBEだからBEエンジニアだ！→BEエンジニアに定義してもらったIFがFEで取り回しづらい構造だったらその都度修正してもらう？提案時点で実装の目処を立てている可能性もある

- APIを使うのはFEだからFEエンジニアだ！→DB、実装の詳細を掴んでいない状況でのIFは突飛なものになる可能性がある

---

## そもスキーマ駆動に求められるもの

### FE

- APIのIFを手動で定義せずに済むようになりたい
- 早くAPIのIFを合意取り、実装に進みたい
- 手戻りが少ない形でAPI部の実装を進めたい

### BE

- FEが必要としているI/Oが知りたい
- バリデーションすべき値を把握したい
- APIによって何を果たしたいのか知りたい(もしかしたら要件レベルかも)
- APIドキュメントのメンテナンスコストを下げたい

---

## 提案するパターン

1. 両者が持つ範囲を決める
   - FE: APIの主目的、リクエスト・レスポンスと「各項目の説明」
   - BE: APIの振る舞いについての説明、リクエスト・レスポンスの具体的な返却パターン
2. FEエンジニアがまずspecを作成し、以下情報を書く
   - APIの目的
   - リクエスト（必須、文字数、Regex等も）
   - レスポンス
3. BEエンジニアがレビューし、commitを追加する
   - APIの振る舞いの詳細な説明
   - リクエスト・レスポンスのexample(複数パターンある場合は全て追加)
   - エラーパターン(4**,5**)
4. FEエンジニアがレビューし、合意が取れたらマージする
5. IF、ドキュメントを生成する

**このパターンは中間言語を使わない場合でも活用できます**

---

## イメージ図

---

## 例1: 契約優先の場合

FE: Nuxt,TypeScript
Schema: TypeSpec
BE: Go

---

## 例2: 実装優先の場合

FE:Nuxt,TypeScript
BE:Python

---

## 注意点

- 小規模、またはフルスタックに行う場合には向かないフロー（かえって冗長になる）
- FEエンジニアがBEを触れない可能性もある
